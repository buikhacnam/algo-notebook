---
title: Minimum Number of Swaps to Make the String Balanced
category: Arrays And Hashing
difficulty: Medium
---

<Callout>

[Leetcode Link](https://leetcode.com/problems/minimum-number-of-swaps-to-make-the-string-balanced)

</Callout>

## Description

You are given a 0-indexed string <code>s</code> of even length <code>n</code>. The string consists of exactly <code>n / 2</code> opening brackets <code>&#39;[&#39;</code> and <code>n / 2</code> closing brackets <code>&#39;]&#39;</code>.

A string is called balanced if and only if:

    - It is the empty string, or
    - It can be written as <code>AB</code>, where both <code>A</code> and <code>B</code> are balanced strings, or
    - It can be written as <code>[C]</code>, where <code>C</code> is a balanced string.

You may swap the brackets at any two indices any number of times.

Return _the minimum number of swaps to make _<code>s</code> _balanced_.

Example 1:

<br />

<pre className="overflow-x-auto">
	Input: s = &quot;][][&quot; Output: 1 Explanation: You can make the string
	balanced by swapping index 0 with index 3. The resulting string is
	&quot;[[]]&quot;.
</pre>

Example 2:

<br />

<pre className="overflow-x-auto">
	Input: s = &quot;]]][[[&quot; Output: 2 Explanation: You can do the following
	to make the string balanced: - Swap index 0 with index 4. s =
	&quot;[]][][&quot;. - Swap index 1 with index 5. s = &quot;[[][]]&quot;. The
	resulting string is &quot;[[][]]&quot;.
</pre>

Example 3:

<br />

<pre className="overflow-x-auto">
	Input: s = &quot;[]&quot; Output: 0 Explanation: The string is already
	balanced.
</pre>

Constraints:

    - <code>n == s.length</code>
    - <code>2 &lt;= n &lt;= 10<sup>6</sup></code>
    - <code>n</code> is even.
    - <code>s[i]</code> is either <code>&#39;[&#39; </code>or <code>&#39;]&#39;</code>.
    - The number of opening brackets <code>&#39;[&#39;</code> equals <code>n / 2</code>, and the number of closing brackets <code>&#39;]&#39;</code> equals <code>n / 2</code>.

## Solution

### Javascript

```javascript
// problem link https://leetcode.com/problems/minimum-number-of-swaps-to-make-the-string-balanced
// time complexity O(n)
// space complexity O(1)

var minSwaps = function (s) {
	let extraClosing = 0
	let maxClosing = 0
	for (let i = 0; i < s.length; i++) {
		s[i] === ']' ? extraClosing++ : extraClosing--
		maxClosing = Math.max(maxClosing, extraClosing)
	}

	return Math.ceil(maxClosing / 2)
}
```

### Python

```python
class Solution:
    def minSwaps(self, s: str) -> int:
        extraClose, maxClose = 0, 0

        for c in s:
            if c == "[":
                extraClose -= 1
            else:
                extraClose += 1

            maxClose = max(maxClose, extraClose)

        return (maxClose + 1) // 2  # Or math.ceil(maxClose / 2)

```

### C++

```cpp
/*
    Approach:
    Just check which '[' brackes are wrongly placed correct that bracket.
    use stack to keep track of bracket

    Time complexity : O(n)
    Space complexity: O(n)

    n is length of the string.
*/

class Solution {
public:
    int minSwaps(string s) {

        int answer=0;

        stack<char> stc;
        stc.push(']');

        int n = s.size();

        for(int i=0;i<n;i++){
            char top = stc.top();

            if(s[i]==']'){

                // is the '[' bracket correctly placed
                // if yes then just pop
                if (top=='[') {
                    stc.pop();
                }
                // if '[' is not correctly placed
                // then correct it (push '[')
                else{
                    stc.push('[');
                    answer++;
                }
            }
            else{
                stc.push('[');
            }
        }
        return answer;
    }
};
```

### Java

```java
class Solution {
    public int minSwaps(String s) {
        int extraClosingbrackets = 0, max = 0;
        for(int i = 0; i < s.length(); i++) {
            if(s.charAt(i)== ']') {
                extraClosingbrackets++;
                max = Math.max(extraClosingbrackets, max);
            }
            else
                extraClosingbrackets--;
        }

        return (max + 1) / 2;
    }
}

```
