---
title: Kth Largest Element in a Stream
category: Heap And Priority Queue
difficulty: Easy
---

<Callout>

[Leetcode Link](https://leetcode.com/problems/kth-largest-element-in-a-stream)

</Callout>

## Description

Design a class to find the <code>k<sup>th</sup></code> largest element in a stream. Note that it is the <code>k<sup>th</sup></code> largest element in the sorted order, not the <code>k<sup>th</sup></code> distinct element.

Implement <code>KthLargest</code> class:

    - <code>KthLargest(int k, int[] nums)</code> Initializes the object with the integer <code>k</code> and the stream of integers <code>nums</code>.
    - <code>int add(int val)</code> Appends the integer <code>val</code> to the stream and returns the element representing the <code>k<sup>th</sup></code> largest element in the stream.

Example 1:

<br />

<pre className="overflow-x-auto">
	Input [&quot;KthLargest&quot;, &quot;add&quot;, &quot;add&quot;,
	&quot;add&quot;, &quot;add&quot;, &quot;add&quot;] [[3, [4, 5, 8, 2]], [3],
	[5], [10], [9], [4]] Output [null, 4, 5, 5, 8, 8] Explanation KthLargest
	kthLargest = new KthLargest(3, [4, 5, 8, 2]); kthLargest.add(3); // return 4
	kthLargest.add(5); // return 5 kthLargest.add(10); // return 5
	kthLargest.add(9); // return 8 kthLargest.add(4); // return 8
</pre>

Constraints:

    - <code>1 &lt;= k &lt;= 10<sup>4</sup></code>
    - <code>0 &lt;= nums.length &lt;= 10<sup>4</sup></code>
    - <code>-10<sup>4</sup> &lt;= nums[i] &lt;= 10<sup>4</sup></code>
    - <code>-10<sup>4</sup> &lt;= val &lt;= 10<sup>4</sup></code>
    - At most <code>10<sup>4</sup></code> calls will be made to <code>add</code>.
    - It is guaranteed that there will be at least <code>k</code> elements in the array when you search for the <code>k<sup>th</sup></code> element.

## Solution

### Javascript

```javascript
/**
 * https://leetcode.com/problems/kth-largest-element-in-a-stream/
 * Time O(N * (K * log(K))) | Space O(K)
 * Your KthLargest object will be instantiated and called as such:
 * var obj = new KthLargest(k, nums)
 * var param_1 = obj.add(val)
 */
class KthLargest {
	/**
	 * @param {number} k
	 * @param {number[]} nums
	 * @constructor
	 */
	constructor(k, nums) {
		this.k = k
		this.minHeap = new MinPriorityQueue()

		nums.forEach((num) => this.add(num))
	}

	/**
	 * @param {number} val
	 * @return {number}
	 */
	add(val, { minHeap } = this) {
		const isUnderCapacity = minHeap.size() < this.k
		if (isUnderCapacity) {
			minHeap.enqueue(val)

			return this.top()
		}

		const isLarger = this.top() < val
		if (isLarger) {
			minHeap.dequeue()
			minHeap.enqueue(val)
		}

		return this.top()
	}

	top({ minHeap } = this) {
		return minHeap.front()?.element || 0
	}
}
```

### Python

```python
class KthLargest:
    def __init__(self, k: int, nums: List[int]):
        # minHeap w/ K largest integers
        self.minHeap, self.k = nums, k
        heapq.heapify(self.minHeap)
        while len(self.minHeap) > k:
            heapq.heappop(self.minHeap)

    def add(self, val: int) -> int:
        heapq.heappush(self.minHeap, val)
        if len(self.minHeap) > self.k:
            heapq.heappop(self.minHeap)
        return self.minHeap[0]

```

### C++

```cpp
/*
    Design a class to find the kth largest element in a stream

    Min heap & maintain only k elements, top will always be kth largest
    Ex. nums = [6,2,3,1,7], k = 3 -> [1,2,3,6,7] -> [3,6,7]

    Time: O(n log n + m log k) -> n = length of nums, m = add calls
    Space: O(n)
*/

class KthLargest {
public:
    KthLargest(int k, vector<int>& nums) {
        this->k = k;
        for (int i = 0; i < nums.size(); i++) {
            pq.push(nums[i]);
        }
        while (pq.size() > this->k) {
            pq.pop();
        }
    }

    int add(int val) {
        pq.push(val);
        if (pq.size() > k) {
            pq.pop();
        }
        return pq.top();
    }
private:
    int k;
    priority_queue<int, vector<int>, greater<int>> pq;
};

/**
 * Your KthLargest object will be instantiated and called as such:
 * KthLargest* obj = new KthLargest(k, nums);
 * int param_1 = obj->add(val);
 */

```

### Java

```java
class KthLargest {

    final PriorityQueue<Integer> heap = new PriorityQueue<>();
    final int k;

    public KthLargest(int k, int[] nums) {
        this.k = k;
        for (int n : nums) add(n);
    }

    public int add(int val) {
        if (heap.size() < k) heap.offer(val); //for adding the values of the array
        else if (val > heap.peek()) {
            heap.poll(); //remove the top element
            heap.add(val); //add the new element
        }
        return heap.peek();
    }
}

```
